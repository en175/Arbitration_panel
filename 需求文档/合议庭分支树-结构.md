# 合议庭分支树（结构稿）

## 1. 目的与边界
- 目的：在工作台左侧提供“合议庭分支树”，用于理解流程并快速跳转到对应节点页面。
- 边界：
  - 仅做“合议庭”分支（不做独任庭）。
  - 不替换、不删除现有时间轴；分支树仅作为补充导航与理解工具。
  - 分支树不展示节点状态（不展示已完成/进行中/未开始）。
  - 点击分支树节点仅执行 `setActiveNode(id)` 切换工作区，不新增路由页。
  - 不自动切换全局角色；页面统一展示“该页面视角（roleLabel）”作为口径提示。

## 2. 参考依据
- 流程骨架：`2026组庭.pdf`
- 口径补充与分支理解：`新合议庭流程.png`

## 3. Node ID 语义映射（以当前演示代码为准）
> 说明：当前演示时间轴启用 1/2/3/6/6.5/7/8/9/10/11/12；4/5 在代码中预留但未启用。

| Node ID | 节点标题 | roleLabel | 组件 |
| ---: | --- | --- | --- |
| 1 | 组庭启动 | 秘书 | NodeStart.vue |
| 2 | 边裁选择 | 当事人 | NodeNominate.vue |
| 3 | 首席选择 | 当事人 | NodeSelection.vue |
| 6 | 立案部长审核 | 立案部长 | NodeReview.vue |
| 6.5 | 分管委领导 | 分管委领导 | NodeReviewLeadership.vue |
| 7 | 主任选择指定路径 | 主任 | NodeDirector.vue |
| 8 | 主任生成并发送名单 | 主任 | NodeDistribute.vue |
| 9 | 当事人排序共同选定 | 当事人 | NodeRanking.vue |
| 10 | 系统汇总排序结果 | 系统 | NodeResult.vue |
| 11 | 主任最终指定 | 主任 | NodeDirectorDesignate.vue |
| 12 | 组庭完成 | 秘书 | NodeFinish.vue |

## 4. 关键业务口径（用于分支判断）
- 合议庭 = 1 个首席 + 2 个边裁。
- “边裁一致/不一致”口径：同一方可能有多个当事人（如申请人 A/B/C），需要判断该方内部是否形成唯一一致选择。
  - 一致：A/B/C 均选择边裁甲 → 有效。
  - 不一致：A 选甲，B/C 选乙 → 无效，进入“推荐/审批”链路。
- “边裁有异议”：当事人对边裁人选结果有异议（不愿意选某个边裁等），发生在“选边裁之后、选首席之前”。

## 5. 分支树结构（最终口径）
> 结构骨架按 `2026组庭.pdf`；分支逻辑与节点命名结合 `新合议庭流程.png` 做可读化。

### 5.1 合议庭（根）
- 合议庭（根）→ 跳转 Node 1
  - 组庭启动（秘书）→ Node 1
  - 三种方式（一级分叉，顺序固定）
    - A 首席 + 边裁都已选定
      - 部门负责人审批 → Node 6
      - 分管委领导审批 → Node 6.5
      - 主任最终指定/确认 → Node 11
    - B 当事人委托边裁选择首席
      - 当事人选择边裁 → Node 2
      - 判断：当事人选择边裁是否一致（系统判定入口）
        - 一致
          - 主任审核 → Node 7
          - 退回 → Node 2
          - 确认边裁 → Node 7
          - 通知边裁限期共同选定首席 → Node 3
            - 判断：边裁选择首席结果是否一致（系统判定入口）
              - 一致
                - 首席确认 → Node 11
              - 不一致
                - 部门负责人推荐 → Node 6
                - 分管委领导推荐 → Node 6.5
                - 主任确认 → Node 11
        - 不一致
          - 部门负责人推荐边裁 → Node 6
          - 分管委领导推荐边裁 → Node 6.5
          - 主任确认边裁 → Node 7
          - 通知边裁限期共同选定首席 → Node 3（后续同上“一致/不一致”）
    - C 当事人选择边裁
      - 当事人选择边裁 → Node 2
      - 当事人选择首席组成方式（三选一）
        - 委托边裁选定首席 → 进入「当事人委托边裁选择首席」流程（复用 B 分支）
        - 双方当事人共同选定 → Node 3
        - 委托主任选定/指定 → Node 7

## 6. 交互与展示规则（实现要求）
- 点击分支树节点：
  - 若节点绑定 `targetId`：调用 `setActiveNode(targetId)` 切换工作区；
  - 若节点仅为分组/标题：不触发跳转。
- 分支树节点右侧展示 `roleLabel` 标签（用于“该节点应当以哪个视角理解/查看”）。
- 工作区顶部展示当前 `viewingNode.roleLabel` 与 `viewingNode.title`，保证用户不困惑“当前页面视角”。

